# We need to ensure that we always use the NARROWLINE recipe.
# M09BD02 used the GRADIENT recipe by default so override here.

# ORAC_OBSERVATION_TYPE for ACSIS
# converts SCIENCE to the sample mode RASTER
[RECIPES_RASTER]
GalacticPlane=REDUCE_SCIENCE_NARROWLINE

[REDUCE_SCIENCE_NARROWLINE]
#
# MAKECUBE parameters
#
CUBE_WCS=GALACTIC
PIXEL_SCALE = 6.0
SPREAD_METHOD = gauss
SPREAD_WIDTH = 9
SPREAD_FWHM_OR_ZERO = 6
#
# Bad-baseline filtering
#
BASELINE_LINEARITY = 1
BASELINE_LINEARITY_LINEWIDTH = base
BASELINE_REGIONS = -230.5:-34.0,-30.0:-26.0,-18.0:-11.0,98.0:106.0,126.0:134.0,152.0:355.5
BASELINE_LINEARITY_MINRMS = 0.080
HIGHFREQ_INTERFERENCE = 1
HIGHFREQ_RINGING = 0
HIGHFREQ_INTERFERENCE_THRESH_CLIP = 4.0
LOWFREQ_INTERFERENCE = 1
#
# Flatfield receptors
#
FLATFIELD = 1
FLAT_METHOD = sum
FLAT_LOWER_VELOCITY = 18.6
FLAT_UPPER_VELOCITY = 29.7
#
# Reference-spectrum removal from time-series cubes
#   - Automatic
#
CLUMP_METHOD = clumpfind
SUBTRACT_REF_EMISSION = 1
REF_EMISSION_MASK_SOURCE = both
REF_EMISSION_COMBINE_REFPOS = 1
REF_EMISSION_BOXSIZE = 19
#
#   - Manual location
#
SUBTRACT_REF_SPECTRUM = 1
REF_SPECTRUM_REGIONS = -1.2:0.8,4.4:8.2,32.8:36.3,38.4:43.7
REF_SPECTRA_COMBINE_REFPOS = 1
REF_SPECTRUM_FILE = 19p50_0p38_ref_spectrum2
#
# Baseline
#
BASELINE_ORDER = 4
#
# Tiling and chunking
#
TILE = 0
CHUNKSIZE = 12288
CUBE_MAXSIZE = 1536
#
# Properties of final products
#
FINAL_LOWER_VELOCITY = -230
FINAL_UPPER_VELOCITY = 355
MOMENTS_LOWER_VELOCITY = -45
MOMENTS_UPPER_VELOCITY = 147
REBIN = 0.635,1.0
LV_IMAGE = 1
LV_AXIS = skylat
LV_ESTIMATOR = sum
